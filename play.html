<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/599/599505.png">

    <script src="config/main.js" type="module"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      iframe {
        width: 100%;
        height: 100vh;
        border: none;
      }
    </style>
  </head>
  <body>
    <iframe id="gameFrame" allowfullscreen="" allow="autoplay; fullscreen; camera; focus-without-user-activation *; monetization; gamepad; keyboard-map *; xr-spatial-tracking; clipboard-write" name="appFrame" scrolling="no" sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-scripts allow-same-origin allow-downloads"></iframe>

   <script>
  const params = new URLSearchParams(window.location.search);
  let gameUrl = params.get("gameurl");

  if (!gameUrl) {
    location.replace("#/");
  } else {
    gameUrl = decodeURIComponent(gameUrl);

    // ðŸ”¥ HARD FIX:
    // remove slash AFTER .html
    gameUrl = gameUrl.replace(/\.html\/+$/i, ".html");

    // also clean double slashes at the end
    gameUrl = gameUrl.replace(/([^:])\/+$/, "$1");

    document.getElementById("gameFrame").src = gameUrl;
  }
</script>
  </body>
</html>
